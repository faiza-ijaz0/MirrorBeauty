(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{1744:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var a=s(5155),l=s(2115),t=s(6766),d=s(3116);let i=(0,s(9946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var c=s(2525);function n(){let[e,r]=(0,l.useState)([]),[s,n]=(0,l.useState)([]),[o,h]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[p,x]=(0,l.useState)(!1),[b,j]=(0,l.useState)("offer"),[N,g]=(0,l.useState)(null),[f,v]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=(0,d.CX)(r),s=(0,d.VW)(n),a=(0,d.bm)(h),l=(0,d.pv)(u);return()=>{e(),s(),a(),l()}},[]);let w=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;j(e),g(r),v(r||{name:"",description:"",discount:0,usageLimit:0,startDate:"",endDate:"",isActive:!0,image:"",referralCode:"",branches:[],services:[]}),x(!0)},y=()=>{x(!1),g(null),v({})},k=async e=>{var r,s;e.preventDefault();let a={...f,branches:(null==(r=f.branches)?void 0:r.map(e=>({id:e.id,name:e.name})))||[],services:(null==(s=f.services)?void 0:s.map(e=>({id:e.id,name:e.name})))||[]};"offer"===b?(null==N?void 0:N.id)?await (0,d.Gz)(N.id,a):await (0,d.kQ)(a):(null==N?void 0:N.id)?await (0,d.fl)(N.id,a):await (0,d.n$)(a),y()},C=async(e,r)=>{confirm("Are you sure you want to delete this item?")&&("offer"===e?await (0,d._i)(r):await (0,d.Zn)(r))};return(0,a.jsxs)("div",{className:"p-6 space-y-10",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>w("offer"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700",children:"+ Create Offer"}),(0,a.jsx)("button",{onClick:()=>w("referral"),className:"px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700",children:"+ Create Referral"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Offers"}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 border",children:"Image"}),(0,a.jsx)("th",{className:"p-3 border",children:"Title"}),(0,a.jsx)("th",{className:"p-3 border",children:"Description"}),(0,a.jsx)("th",{className:"p-3 border",children:"Discount"}),(0,a.jsx)("th",{className:"p-3 border",children:"Usage Limit"}),(0,a.jsx)("th",{className:"p-3 border",children:"Start Date"}),(0,a.jsx)("th",{className:"p-3 border",children:"End Date"}),(0,a.jsx)("th",{className:"p-3 border",children:"Active"}),(0,a.jsx)("th",{className:"p-3 border",children:"Branches"}),(0,a.jsx)("th",{className:"p-3 border",children:"Services"}),(0,a.jsx)("th",{className:"p-3 border",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-2 border",children:e.image&&(0,a.jsx)(t.default,{src:e.image,alt:e.name,width:60,height:60,className:"rounded"})}),(0,a.jsx)("td",{className:"p-2 border",children:e.name}),(0,a.jsx)("td",{className:"p-2 border",children:e.description}),(0,a.jsxs)("td",{className:"p-2 border",children:[e.discount,"%"]}),(0,a.jsx)("td",{className:"p-2 border",children:e.usageLimit}),(0,a.jsx)("td",{className:"p-2 border",children:e.startDate}),(0,a.jsx)("td",{className:"p-2 border",children:e.endDate}),(0,a.jsx)("td",{className:"p-2 border",children:e.isActive?"Yes":"No"}),(0,a.jsx)("td",{className:"p-2 border",children:e.branches.map(e=>e.name).join(", ")}),(0,a.jsx)("td",{className:"p-2 border",children:e.services.map(e=>e.name).join(", ")}),(0,a.jsxs)("td",{className:"p-2 border flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>w("offer",e),className:"p-2 rounded bg-blue-100 hover:bg-blue-200",children:(0,a.jsx)(i,{size:16,className:"text-blue-600"})}),(0,a.jsx)("button",{onClick:()=>C("offer",e.id),className:"p-2 rounded bg-red-100 hover:bg-red-200",children:(0,a.jsx)(c.A,{size:16,className:"text-red-600"})})]})]},e.id))})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Referrals"}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 border",children:"Title"}),(0,a.jsx)("th",{className:"p-3 border",children:"Description"}),(0,a.jsx)("th",{className:"p-3 border",children:"Discount"}),(0,a.jsx)("th",{className:"p-3 border",children:"Usage Limit"}),(0,a.jsx)("th",{className:"p-3 border",children:"Start Date"}),(0,a.jsx)("th",{className:"p-3 border",children:"End Date"}),(0,a.jsx)("th",{className:"p-3 border",children:"Active"}),(0,a.jsx)("th",{className:"p-3 border",children:"Referral Code"}),(0,a.jsx)("th",{className:"p-3 border",children:"Branches"}),(0,a.jsx)("th",{className:"p-3 border",children:"Services"}),(0,a.jsx)("th",{className:"p-3 border",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>{var r;return(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-2 border",children:e.name}),(0,a.jsx)("td",{className:"p-2 border",children:e.description}),(0,a.jsxs)("td",{className:"p-2 border",children:[e.discount,"%"]}),(0,a.jsx)("td",{className:"p-2 border",children:e.usageLimit}),(0,a.jsx)("td",{className:"p-2 border",children:e.startDate}),(0,a.jsx)("td",{className:"p-2 border",children:e.endDate}),(0,a.jsx)("td",{className:"p-2 border",children:e.isActive?"Yes":"No"}),(0,a.jsx)("td",{className:"p-2 border",children:e.referralCode}),(0,a.jsx)("td",{className:"p-2 border",children:null==(r=e.branches)?void 0:r.map(e=>e.name).join(", ")}),(0,a.jsx)("td",{className:"p-2 border",children:e.services.map(e=>e.name).join(", ")}),(0,a.jsxs)("td",{className:"p-2 border flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>w("referral",e),className:"p-2 rounded bg-blue-100 hover:bg-blue-200",children:(0,a.jsx)(i,{size:16,className:"text-blue-600"})}),(0,a.jsx)("button",{onClick:()=>C("referral",e.id),className:"p-2 rounded bg-red-100 hover:bg-red-200",children:(0,a.jsx)(c.A,{size:16,className:"text-red-600"})})]})]},e.id)})})]})})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:[N?"Edit":"Create"," ","offer"===b?"Offer":"Referral"]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",value:f.name||"",onChange:e=>v({...f,name:e.target.value}),className:"w-full border p-2 rounded",required:!0}),(0,a.jsx)("textarea",{placeholder:"Description",value:f.description||"",onChange:e=>v({...f,description:e.target.value}),className:"w-full border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Discount %",value:f.discount||"",onChange:e=>v({...f,discount:Number(e.target.value)}),className:"w-full border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Usage Limit",value:f.usageLimit||"",onChange:e=>v({...f,usageLimit:Number(e.target.value)}),className:"w-full border p-2 rounded",required:!0}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("input",{type:"date",value:f.startDate||"",onChange:e=>v({...f,startDate:e.target.value}),className:"w-full border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"date",value:f.endDate||"",onChange:e=>v({...f,endDate:e.target.value}),className:"w-full border p-2 rounded",required:!0})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:f.isActive||!1,onChange:e=>v({...f,isActive:e.target.checked})}),"Active"]}),"referral"===b&&(0,a.jsx)("input",{type:"text",placeholder:"Referral Code",value:f.referralCode||"",onChange:e=>v({...f,referralCode:e.target.value}),className:"w-full border p-2 rounded"}),"offer"===b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",placeholder:"Image URL",value:f.image||"",onChange:e=>v({...f,image:e.target.value}),className:"w-full border p-2 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium",children:"Branches"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(e=>{var r;return(0,a.jsxs)("label",{className:"flex items-center gap-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:null==(r=f.branches)?void 0:r.some(r=>r.id===e.id),onChange:r=>{let s=r.target.checked?[...f.branches,e]:f.branches.filter(r=>r.id!==e.id);v({...f,branches:s})}}),e.name]},e.id)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium",children:"Services"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>{var r;return(0,a.jsxs)("label",{className:"flex items-center gap-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:null==(r=f.services)?void 0:r.some(r=>r.id===e.id),onChange:r=>{let s=r.target.checked?[...f.services,e]:f.services.filter(r=>r.id!==e.id);v({...f,services:s})}}),e.name]},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:N?"Update":"Create"})]})]})]})})]})}},2525:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},9829:(e,r,s)=>{Promise.resolve().then(s.bind(s,1744))},9946:(e,r,s)=>{"use strict";s.d(r,{A:()=>c});var a=s(2115);let l=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},t=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return r.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,r)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:n="",children:o,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:r,...d,width:l,height:l,stroke:s,strokeWidth:c?24*Number(i)/Number(l):i,className:t("lucide",n),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[r,s]=e;return(0,a.createElement)(r,s)}),...Array.isArray(o)?o:[o]])}),c=(e,r)=>{let s=(0,a.forwardRef)((s,d)=>{let{className:c,...n}=s;return(0,a.createElement)(i,{ref:d,iconNode:r,className:t("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...n})});return s.displayName=l(e),s}}},e=>{e.O(0,[135,210,748,766,116,441,964,358],()=>e(e.s=9829)),_N_E=e.O()}]);