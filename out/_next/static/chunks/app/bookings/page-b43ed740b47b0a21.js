(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{1007:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1586:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},4616:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5339:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5635:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>D});var t=a(5155),l=a(2115),r=a(5317),i=a(6104),n=a(1586),d=a(4616),c=a(9074);let o=(0,a(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var m=a(7924),x=a(646),u=a(5339),h=a(4861),p=a(4186),g=a(1007),y=a(4940),b=a(2525),v=a(6694),j=a(1183),N=a(9092);let f=["Al Bustan","Marina","TECOM","AL Muraqabat","IBN Batutta Mall"],w=["Facial","Hair","Nails","Lashes","Massage"],k=["cash","card"],C=["Komal","Shameem","Do Thi Kim","Alishba"],S={serviceId:"",serviceName:"",category:"",duration:30,price:0,quantity:1};function A(e){let[s,a]=e.split(":"),t=Number(s),l=t>=12?"PM":"AM";return 0===t&&(t=12),t>12&&(t-=12),"".concat(t,":").concat(a," ").concat(l)}let M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1320,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,t=[];for(let l=e;l<=s;l+=a)t.push(function(e){let s=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(s,":").concat(a)}(l));return t}();function D(){var e;let[s,a]=(0,l.useState)([]),[D,P]=(0,l.useState)({}),[T,q]=(0,l.useState)(!0),[E,G]=(0,l.useState)(""),[I,z]=(0,l.useState)("all"),[B,F]=(0,l.useState)(!1),[O,U]=(0,l.useState)(!1),[L,_]=(0,l.useState)(!1),[H,J]=(0,l.useState)(null),[K,Q]=(0,l.useState)(f[0]),[Y,Z]=(0,l.useState)(()=>(0,v.GP)(new Date,"yyyy-MM-dd")),[R,W]=(0,l.useState)("10:00"),[$,V]=(0,l.useState)(""),[X,ee]=(0,l.useState)("cash"),[es,ea]=(0,l.useState)(!1),[et,el]=(0,l.useState)(!1),[er,ei]=(0,l.useState)("upcoming"),[en,ed]=(0,l.useState)(""),[ec,eo]=(0,l.useState)([{...S}]),[em,ex]=(0,l.useState)(""),[eu,eh]=(0,l.useState)(()=>(0,v.GP)(new Date,"yyyy-MM-dd")),[ep,eg]=(0,l.useState)("all"),[ey,eb]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,r.GG)((0,r.rJ)(i.db,"staff")),s=[];e.forEach(e=>{let a=e.data();(null==a?void 0:a.name)&&s.push(String(a.name))}),eb(s.length?s:C)}catch(e){eb(C)}})()},[]),(0,l.useEffect)(()=>{let e=(0,r.P)((0,r.rJ)(i.db,"bookings"),(0,r.My)("createdAt","desc")),s=(0,r.aQ)(e,e=>{a(e.docs.map(e=>{var s,a,t,l,r;let i=e.data();return{id:e.id,userId:i.userId||"",customerName:i.customerName||"",services:i.services||[],bookingDate:(null==(s=i.bookingDate)?void 0:s.toDate())||new Date,bookingTime:i.bookingTime||"",branch:i.branch||"",staff:null!=(l=i.staff)?l:null,totalPrice:i.totalPrice||0,totalDuration:i.totalDuration||0,status:i.status||"upcoming",paymentMethod:i.paymentMethod||"cash",emailConfirmation:i.emailConfirmation||!1,smsConfirmation:i.smsConfirmation||!1,createdAt:(null==(a=i.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(t=i.updatedAt)?void 0:t.toDate())||new Date,remarks:null!=(r=i.remarks)?r:null}})),q(!1)});return()=>s()},[]),(0,l.useEffect)(()=>{(async()=>{let e=(0,r.P)((0,r.rJ)(i.db,"users")),s=await (0,r.GG)(e),a={};s.docs.forEach(e=>{let s=e.data();a[e.id]={id:e.id,name:s.name||s.displayName||"Unknown User",email:s.email||"",phone:s.phone||s.phoneNumber||""}}),P(a)})()},[]);let ev=s.filter(e=>{let s=E.toLowerCase(),a=e.customerName.toLowerCase().includes(s)||e.branch.toLowerCase().includes(s)||e.services.some(e=>e.serviceName.toLowerCase().includes(s)),t="all"===I||e.status===I;return a&&t}),ej=async(e,s)=>{try{let a=(0,r.H9)(i.db,"bookings",e);await (0,r.mZ)(a,{status:s,updatedAt:(0,r.O5)()})}catch(e){console.error("Error updating booking status:",e),alert("Failed to update status.")}},eN=()=>{Q(f[0]),Z((0,v.GP)(new Date,"yyyy-MM-dd")),W("10:00"),V(""),ee("cash"),ea(!1),el(!1),ei("upcoming"),ed(""),eo([{...S}]),ex(""),J(null)},ef=(e,s)=>{eN(),ed(e),W(s),Z(eu),F(!0)},ew=e=>{J(e.id),Q(e.branch||f[0]),Z((0,v.GP)(e.bookingDate,"yyyy-MM-dd")),W(e.bookingTime||"10:00"),V(e.customerName||""),ee(e.paymentMethod||"cash"),ea(!!e.emailConfirmation),el(!!e.smsConfirmation),ei(e.status||"upcoming"),ed(e.staff||""),eo(e.services&&e.services.length>0?e.services.map(e=>({serviceId:e.serviceId||"",serviceName:e.serviceName||"",category:e.category||"",duration:Number(e.duration)||0,price:Number(e.price)||0,quantity:Number(e.quantity)||1})):[{...S}]),ex(e.remarks||""),F(!0)},ek=(e,s,a)=>{eo(t=>t.map((t,l)=>l===e?{...t,[s]:a}:t))},eC={totalPrice:(e=ec).reduce((e,s)=>e+(Number(s.price)||0)*(Number(s.quantity)||0),0),totalDuration:e.reduce((e,s)=>e+(Number(s.duration)||0)*(Number(s.quantity)||0),0)},eS=async()=>{let e=$.trim()?Y?R?K?en?0===ec.length?"Add at least one service":ec.every(e=>e.serviceName.trim().length>0)?null:"Each service must have a name":"Staff is required":"Branch is required":"Service time is required":"Service date is required":"Customer name is required";if(e)return void alert(e);try{U(!0);let e={userId:"",customerName:$.trim(),services:ec.map(e=>({...e,price:Number(e.price)||0,duration:Number(e.duration)||0,quantity:Number(e.quantity)||0})),bookingDate:r.Dc.fromDate(new Date(Y+"T00:00:00")),bookingTime:R,branch:K,staff:en||null,totalPrice:eC.totalPrice,totalDuration:eC.totalDuration,status:er,paymentMethod:X,emailConfirmation:es,smsConfirmation:et,updatedAt:(0,r.O5)(),remarks:em||null};if(H){let s=(0,r.H9)(i.db,"bookings",H);await (0,r.mZ)(s,e)}else await (0,r.gS)((0,r.rJ)(i.db,"bookings"),{...e,createdAt:(0,r.O5)()});F(!1),eN()}catch(e){console.error("Error saving booking:",e),alert("Failed to save booking. Check console for details.")}finally{U(!1)}},eA=async()=>{if(H&&confirm("Delete this booking? This action cannot be undone."))try{_(!0),await (0,r.kd)((0,r.H9)(i.db,"bookings",H)),F(!1),eN()}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking.")}finally{_(!1)}},eM=(0,l.useMemo)(()=>{let e=new Date(eu+"T00:00:00");return s.filter(s=>{let a=function(e,s,a){let[t,l]=(0,j.x)(void 0,e,s);return+(0,N.o)(t)==+(0,N.o)(l)}(s.bookingDate,e),t="all"===ep||s.branch===ep;return a&&t})},[s,eu,ep]),eD=(0,l.useMemo)(()=>{let e={};return M.forEach(s=>{e[s]={},ey.forEach(a=>e[s][a]=[])}),eM.forEach(s=>{let a=s.bookingTime,t=s.staff||"";a&&t&&e[a]&&void 0!==e[a][t]&&e[a][t].push(s)}),e},[eM,ey]);return T?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,t.jsx)("span",{className:"ml-3 text-pink-600",children:"Loading bookings..."})]})})}):(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto dark:text-white",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-start sm:items-center justify-around gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Bookings Management"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-white",children:"Manage all customer bookings and appointments"})]}),(0,t.jsxs)("button",{onClick:()=>{eN(),F(!0)},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 shadow",children:[(0,t.jsx)(d.A,{className:"w-3 h-3"}),"Add Schedule"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,t.jsx)("input",{type:"date",value:eu,onChange:e=>eh(e.target.value),className:"w-full border rounded-md px-3 py-2"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,t.jsxs)("select",{value:ep,onChange:e=>eg(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[(0,t.jsx)("option",{value:"all",children:"All Branches"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by customer name, branch, or service...",value:E,onChange:e=>G(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]})}),(0,t.jsx)("div",{className:"md:w-48",children:(0,t.jsxs)("select",{value:I,onChange:e=>z(e.target.value),className:"w-full bg-black text-white px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,t.jsx)("option",{value:"past",children:"Past"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(c.A,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(x.A,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"upcoming"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsx)(u.A,{className:"w-6 h-6 text-yellow-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Past"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"past"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,t.jsx)(h.A,{className:"w-6 h-6 text-red-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"cancelled"===e.status).length})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto mb-10",children:(0,t.jsxs)("div",{className:"min-w-[900px] relative",style:{},children:[(0,t.jsxs)("div",{className:"grid sticky top-0 z-20",style:{gridTemplateColumns:"180px repeat(".concat(ey.length,", 200px)")},children:[(0,t.jsx)("div",{className:"bg-gray-100 border-b px-4 py-3 font-semibold sticky left-0 z-30",children:"Time"}),ey.map(e=>(0,t.jsx)("div",{className:"bg-gray-100 border-b px-4 py-3 font-semibold text-center",children:e},e))]}),(0,t.jsx)("div",{className:"",children:M.map(e=>(0,t.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"180px repeat(".concat(ey.length,", 200px)")},children:[(0,t.jsx)("div",{className:"sticky left-0 z-10 bg-gray-50 border-t border-b px-4 py-3 font-medium",children:A(e)}),ey.map(s=>{var a;let l=(null==(a=eD[e])?void 0:a[s])||[];return(0,t.jsx)("div",{className:"border-t border-b border-l px-2 py-2 min-h-[64px]",onClick:a=>{0===l.length&&ef(s,e)},children:(0,t.jsxs)("div",{className:"space-y-2",children:[l.map(e=>(0,t.jsxs)("button",{onClick:s=>{s.stopPropagation(),ew(e)},className:"w-full text-left text-xs rounded-md border px-2 py-2 hover:shadow transition ".concat((e=>{switch(e){case"upcoming":return"bg-emerald-50 border-emerald-300 text-emerald-800";case"past":return"bg-gray-50 border-gray-300 text-gray-700";case"cancelled":return"bg-rose-50 border-rose-300 text-rose-800 line-through";default:return"bg-slate-50 border-slate-300 text-slate-800"}})(e.status)),title:"".concat(e.customerName," @ ").concat(e.bookingTime),children:[(0,t.jsx)("div",{className:"font-semibold truncate",children:e.customerName}),(0,t.jsx)("div",{className:"truncate",children:e.services.map(e=>e.serviceName).join(", ")}),(0,t.jsxs)("div",{className:"flex items-center text-[11px] opacity-80 mt-1",children:[(0,t.jsx)(p.A,{className:"w-3 h-3 mr-1"}),A(e.bookingTime)," • ",e.totalDuration,"m"]})]},e.id)),0===l.length&&(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)("button",{className:"text-[11px] text-emerald-700 hover:text-emerald-900 underline",onClick:()=>ef(s,e),children:"Add here"})})]})},"".concat(e,"-").concat(s))})]},e))})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Services"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ev.map(e=>{let s=D[e.userId];return(0,t.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>ew(e),children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-pink-100 flex items-center justify-center",children:(0,t.jsx)(g.A,{className:"h-5 w-5 text-pink-600"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(null==s?void 0:s.email)||"No email"})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:[e.services.slice(0,2).map((e,s)=>(0,t.jsxs)("div",{className:"mb-1",children:[e.serviceName," ",e.quantity>1&&"(x".concat(e.quantity,")")]},s)),e.services.length>2&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.services.length-2," more"]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,v.GP)(e.bookingDate,"MMM dd, yyyy")}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 flex items-center mt-1",children:[(0,t.jsx)(p.A,{className:"w-3 h-3 mr-1"}),A(e.bookingTime)]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.staff||"—"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,t.jsx)(o,{className:"w-4 h-4 mr-2 text-gray-400"}),e.branch]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(e.paymentMethod.toLowerCase(),(0,t.jsx)(n.A,{className:"w-4 h-4"})),(0,t.jsxs)("span",{className:"ml-2",children:["$",e.totalPrice.toFixed(2)]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:e.paymentMethod})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize ".concat((e=>{switch(e){case"upcoming":return"bg-blue-100 text-blue-800";case"past":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>ew(e),className:"text-emerald-700 hover:text-emerald-900",title:"Edit booking",children:(0,t.jsx)(y.A,{className:"w-4 h-4"})}),"upcoming"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>ej(e.id,"past"),className:"text-green-600 hover:text-green-900",title:"Mark as completed",children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>ej(e.id,"cancelled"),className:"text-red-600 hover:text-red-900",title:"Cancel booking",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})})]})]})})]},e.id)})})]})}),0===ev.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookings found"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:E||"all"!==I?"Try adjusting your search or filter criteria.":"No bookings have been made yet."})]})]}),B&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 z-50 overflow-y-auto h-full w-full",children:(0,t.jsx)("div",{className:"relative top-10 mx-auto w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:H?"Edit Schedule":"Add Schedule"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[H&&(0,t.jsxs)("button",{onClick:eA,disabled:L,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-60",title:"Delete booking",children:[(0,t.jsx)(b.A,{className:"w-4 h-4"}),"Delete"]}),(0,t.jsx)("button",{onClick:()=>{F(!1),eN()},className:"text-gray-400 hover:text-gray-600",title:"Close",children:(0,t.jsx)(h.A,{className:"w-6 h-6"})})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Branch"}),(0,t.jsx)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:K,onChange:e=>Q(e.target.value),children:f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,t.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",onChange:e=>{eo(s=>s.map((s,a)=>0===a?{...s,category:e.target.value}:s))},children:[(0,t.jsx)("option",{value:"",children:"Select One"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Staff"}),(0,t.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:en,onChange:e=>ed(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select One"}),ey.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,t.jsx)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:X,onChange:e=>ee(e.target.value),children:k.map(e=>(0,t.jsx)("option",{value:e,children:e.toUpperCase()},e))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Service Date"}),(0,t.jsx)("input",{type:"date",className:"mt-1 w-full border rounded-md px-3 py-2",value:Y,onChange:e=>Z(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,t.jsx)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:R,onChange:e=>W(e.target.value),children:M.map(e=>(0,t.jsx)("option",{value:e,children:A(e)},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),(0,t.jsx)("input",{type:"text",placeholder:"Customer name",className:"mt-1 w-full border rounded-md px-3 py-2",value:$,onChange:e=>V(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 bg-gray-50 text-xs font-semibold",children:[(0,t.jsx)("div",{className:"col-span-4",children:"Service"}),(0,t.jsx)("div",{className:"col-span-2",children:"Category"}),(0,t.jsx)("div",{className:"col-span-2",children:"Duration (min)"}),(0,t.jsx)("div",{className:"col-span-2",children:"Price"}),(0,t.jsx)("div",{className:"col-span-1",children:"Qty"}),(0,t.jsx)("div",{className:"col-span-1 text-right",children:"—"})]}),ec.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 border-t",children:[(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2",placeholder:"Service name",value:e.serviceName,onChange:e=>ek(s,"serviceName",e.target.value)})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsxs)("select",{className:"w-full border rounded-md px-3 py-2",value:e.category,onChange:e=>ek(s,"category",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("input",{type:"number",min:0,className:"w-full border rounded-md px-3 py-2",value:e.duration,onChange:e=>ek(s,"duration",Number(e.target.value||0))})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("input",{type:"number",min:0,step:"0.01",className:"w-full border rounded-md px-3 py-2",value:e.price,onChange:e=>ek(s,"price",Number(e.target.value||0))})}),(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("input",{type:"number",min:1,className:"w-full border rounded-md px-3 py-2",value:e.quantity,onChange:e=>ek(s,"quantity",Number(e.target.value||1))})}),(0,t.jsx)("div",{className:"col-span-1 flex justify-end items-center",children:ec.length>1&&(0,t.jsx)("button",{onClick:()=>{eo(e=>e.filter((e,a)=>a!==s))},className:"p-2 rounded hover:bg-red-50 text-red-600",title:"Remove",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})})})]},s)),(0,t.jsxs)("div",{className:"px-4 py-3 border-t flex justify-between items-center",children:[(0,t.jsxs)("button",{onClick:()=>{eo(e=>[...e,{...S}])},className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-emerald-50 text-emerald-700 hover:bg-emerald-100",children:[(0,t.jsx)(d.A,{className:"w-4 h-4"}),"Add more service"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsxs)("span",{className:"mr-4",children:[(0,t.jsx)("strong",{children:"Total Duration:"})," ",eC.totalDuration," min"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"Total Price:"})," $",eC.totalPrice.toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (optional)"}),(0,t.jsx)("textarea",{className:"mt-1 w-full border rounded-md px-3 py-2 min-h-[80px]",value:em,onChange:e=>ex(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,t.jsx)("span",{className:"text-sm",children:"Send booking notification by email"}),(0,t.jsx)("input",{type:"checkbox",checked:es,onChange:e=>ea(e.target.checked)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,t.jsx)("span",{className:"text-sm",children:"Send booking notification by SMS"}),(0,t.jsx)("input",{type:"checkbox",checked:et,onChange:e=>el(e.target.checked)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Application Status"}),(0,t.jsxs)("select",{className:"mt-1 w-full border rounded-md px-3 py-2",value:er,onChange:e=>ei(e.target.value),children:[(0,t.jsx)("option",{value:"upcoming",children:"Approved (Upcoming)"}),(0,t.jsx)("option",{value:"past",children:"Completed (Past)"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>{F(!1),eN()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",disabled:O||L,children:"Close"}),(0,t.jsx)("button",{onClick:eS,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700 disabled:opacity-60",disabled:O||L,children:O?H?"Updating...":"Saving...":H?"Update":"Save"})]})]})})})]})})}},6104:(e,s,a)=>{"use strict";a.d(s,{Gg:()=>u,IG:()=>m,db:()=>o,j2:()=>x});var t=a(3915),l=a(1906),r=a(5317),i=a(7505),n=a(4903);let d={apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},c=null,o=null,m=null,x=null;function u(){return null!==c}!0;try{c=(0,t.initializeApp)(d),o=(0,r.aU)(c),m=(0,i.c7)(c),x=(0,n.getAuth)(c);try{(0,l.P5)(c)}catch(e){console.warn("Firebase Analytics initialization failed:",e)}}catch(e){console.error("Firebase initialization failed:",e),x=null}},6366:(e,s,a)=>{Promise.resolve().then(a.bind(a,5635))}},e=>{e.O(0,[135,210,748,985,441,964,358],()=>e(e.s=6366)),_N_E=e.O()}]);