(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{283:(e,r,t)=>{"use strict";t.d(r,{A:()=>n}),t(5155);var s=t(2115);t(9323),t(6104);let a=(0,s.createContext)({user:null,userRole:null,loading:!0,isAdmin:!1,error:null}),n=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2657:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2919:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},3311:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},3380:(e,r,t)=>{Promise.resolve().then(t.bind(t,3807))},3807:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(5155),a=t(2115),n=t(5695),i=t(4903),o=t(6104),l=t(283),c=t(6874),d=t.n(c),u=t(3311),m=t(8883),h=t(2919),p=t(8749),f=t(2657);function g(){let[e,r]=(0,a.useState)(""),[t,c]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[k,v]=(0,a.useState)(""),[N,A]=(0,a.useState)(""),E=(0,n.useRouter)(),{user:C}=(0,l.A)();a.useEffect(()=>{C&&E.push("/")},[C,E]);let S=async r=>{let s;if(r.preventDefault(),s=!0,v(""),A(""),x(""),e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(v("Please enter a valid email address"),s=!1):(v("Email is required"),s=!1),t||(A("Password is required"),s=!1),s){b(!0);try{await (0,i.x9)(o.j2,e,t),E.push("/")}catch(r){console.error("Sign in error:",r);let e="Failed to sign in";"auth/user-not-found"===r.code?e="No account found with this email address":"auth/wrong-password"===r.code?e="Incorrect password":"auth/invalid-email"===r.code?e="Invalid email address":"auth/too-many-requests"===r.code&&(e="Too many failed attempts. Please try again later"),x(e)}finally{b(!1)}}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-pink-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-pink-500 to-pink-600 rounded-full mb-4 shadow-lg",children:(0,s.jsx)(u.A,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-pink-500 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Sign in to Mirror Beauty Lounge Dashboard"})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-pink-100 p-8",children:[(0,s.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(m.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>{r(e.target.value),k&&v("")},className:"w-full pl-10 pr-4 py-3 border bg-white rounded-lg focus:ring-2 transition-colors ".concat(k?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-pink-500 focus:border-pink-500"),placeholder:"Enter your email"})]}),k&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)(d(),{href:"/forgot-password",className:"text-sm text-pink-600 hover:text-pink-700 font-medium transition-colors",children:"Forgot password?"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"password",name:"password",type:w?"text":"password",autoComplete:"current-password",required:!0,value:t,onChange:e=>{c(e.target.value),N&&A("")},className:"w-full pl-10 pr-12 py-3 border bg-white rounded-lg focus:ring-2 transition-colors ".concat(N?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-pink-500 focus:border-pink-500"),placeholder:"Enter your password"}),(0,s.jsx)("button",{type:"button",onClick:()=>j(!w),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:w?(0,s.jsx)(p.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,s.jsx)(f.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),N&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:N})]}),g&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:g})}),(0,s.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-pink-500 to-pink-600 text-white py-3 px-4 rounded-lg font-medium hover:from-pink-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:y?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Demo Credentials:"}),(0,s.jsx)("p",{className:"text-sm text-blue-600",children:"admin@mirrorbeauty.com / admin123"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(d(),{href:"/signup",className:"text-pink-600 hover:text-pink-700 font-medium transition-colors",children:"Create one here"})]})})]}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Secure access to Mirror Beauty Lounge Dashboard"})})]})})}},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6104:(e,r,t)=>{"use strict";t.d(r,{Gg:()=>h,IG:()=>u,db:()=>d,j2:()=>m});var s=t(3915),a=t(1906),n=t(5317),i=t(7505),o=t(4903);let l={apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},c=null,d=null,u=null,m=null;function h(){return null!==c}!0;try{c=(0,s.initializeApp)(l),d=(0,n.aU)(c),u=(0,i.c7)(c),m=(0,o.getAuth)(c);try{(0,a.P5)(c)}catch(e){console.warn("Firebase Analytics initialization failed:",e)}}catch(e){console.error("Firebase initialization failed:",e),m=null}},8749:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},8883:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9323:(e,r,t)=>{"use strict";t.d(r,{eg:()=>i,ej:()=>o,nW:()=>c,yN:()=>d});var s=t(4903),a=t(5317),n=t(6104);let i=async e=>{try{if(!n.j2)return{error:"Firebase auth is not initialized"};if(n.j2.currentUser){if(await (0,s.updateProfile)(n.j2.currentUser,{displayName:e}),!n.db)throw Error("Firestore is not initialized");let r=(0,a.H9)(n.db,"users",n.j2.currentUser.uid);await (0,a.mZ)(r,{displayName:e,updatedAt:new Date})}return{error:null}}catch(e){return console.error("Error updating profile:",e),{error:e instanceof Error?e.message:"Unknown error"}}},o=async e=>{try{if(!n.j2)return{error:"Firebase auth is not initialized"};return n.j2.currentUser&&await (0,s.f3)(n.j2.currentUser,e),{error:null}}catch(e){return console.error("Error updating password:",e),{error:e instanceof Error?e.message:"Unknown error"}}},l=async(e,r,t,s)=>{try{let i={uid:e,email:r,displayName:s,role:t,createdAt:new Date,updatedAt:new Date};if(!n.db)throw Error("Firestore is not initialized");return await (0,a.BN)((0,a.H9)(n.db,"users",e),i),{error:null}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}},c=async()=>{try{if(!n.j2)return{success:!1,error:"Firebase auth is not initialized"};console.log("Creating admin user: admin@mirrorbeauty.com");let e=await (0,s.createUserWithEmailAndPassword)(n.j2,"admin@mirrorbeauty.com","admin123");return await (0,s.updateProfile)(e.user,{displayName:"Admin User"}),await l(e.user.uid,"admin@mirrorbeauty.com","admin","Admin User"),console.log("Admin user created successfully"),{success:!0,error:null}}catch(e){return console.error("Error creating admin user:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}},d=async(e,r,s,a)=>{try{if(console.log("Creating new user:",e),!(null===n.j2||void 0===n.j2?void 0:n.j2.currentUser))return{success:!1,error:"No authenticated user found"};let{initializeApp:i}=await Promise.resolve().then(t.bind(t,3915)),{getAuth:o,createUserWithEmailAndPassword:c,updateProfile:d,signOut:u}=await Promise.resolve().then(t.bind(t,4903)),m=i({apiKey:"AIzaSyBYQA66rKOPrb4kce-hYCTYAbGKanVGbZ8",authDomain:"mirrorsbeautylounge-7c5ff.firebaseapp.com",projectId:"mirrorsbeautylounge-7c5ff",storageBucket:"mirrorsbeautylounge-7c5ff.firebasestorage.app",messagingSenderId:"1029530532506",appId:"1:1029530532506:web:2fa18cc521b2524e5afd23",measurementId:"G-GMWQSDP9JW"},"secondary"),h=o(m),p=await c(h,e,r);s&&await d(p.user,{displayName:s}),await l(p.user.uid,e,a,s),await u(h);try{"delete"in m&&"function"==typeof m.delete&&await m.delete()}catch(e){console.log("Secondary app cleanup not needed or failed:",e)}return console.log("New user created successfully without affecting current session"),{success:!0,error:null,user:p.user}}catch(e){return console.error("Error creating new user:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},9946:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(2115);let a=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:r,...i,width:a,height:a,stroke:t,strokeWidth:l?24*Number(o)/Number(a):o,className:n("lucide",c),...!d&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),l=(e,r)=>{let t=(0,s.forwardRef)((t,i)=>{let{className:l,...c}=t;return(0,s.createElement)(o,{ref:i,iconNode:r,className:n("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return t.displayName=a(e),t}}},e=>{e.O(0,[135,210,748,874,441,964,358],()=>e(e.s=3380)),_N_E=e.O()}]);