(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{2525:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},4616:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5660:(e,s,r)=>{Promise.resolve().then(r.bind(r,7698))},7580:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7698:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var t=r(5155),a=r(2115),l=r(283),n=r(5317),i=r(6104);let d=async(e,s)=>{try{if(!(0,i.Gg)()||!i.db)return{error:"Firebase is not configured. Please set up your Firebase environment variables."};return await (0,n.mZ)((0,n.H9)(i.db,"users",e),{role:s,updatedAt:new Date}),{error:null}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}},o=async e=>{try{if(!(0,i.Gg)()||!i.db)return{error:"Firebase is not configured. Please set up your Firebase environment variables."};return await (0,n.kd)((0,n.H9)(i.db,"users",e)),{error:null}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}};var c=r(9323),m=r(5525),x=r(4616),u=r(7951),p=r(1007);let h=(0,r(9946).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var b=r(2525),g=r(7580),j=r(8749),f=r(2657),v=r(4229);function y(){let{isAdmin:e}=(0,l.A)(),[s,r]=(0,a.useState)([]),[y,N]=(0,a.useState)(!0),[k,w]=(0,a.useState)(!1),[A,M]=(0,a.useState)(!1),[U,C]=(0,a.useState)({email:"",password:"",displayName:"",role:"user"}),[_,D]=(0,a.useState)(!1),[E,S]=(0,a.useState)(""),[F,L]=(0,a.useState)("");(0,a.useEffect)(()=>{if(!e)return;let s=((e,s)=>{if(!(0,i.Gg)()||!i.db)return console.warn("Firebase is not configured, skipping users subscription"),()=>{};let r=(0,n.rJ)(i.db,"users"),t=(0,n.P)(r,(0,n.My)("createdAt","desc"));return(0,n.aQ)(t,s=>{e(s.docs.map(e=>{var s,r;return{...e.data(),createdAt:(null==(s=e.data().createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(r=e.data().updatedAt)?void 0:r.toDate())||new Date}}))},e=>{console.error("Error in users subscription:",e),s&&s(e)})})(e=>{r(e),N(!1)},e=>{console.error("Users subscription error:",e),N(!1)});return()=>s()},[e]);let q=async(e,s)=>{let{error:r}=await d(e,s);r&&alert("Error updating user role: "+r)},P=async(e,s)=>{if(confirm("Delete user ".concat(s,"? This action cannot be undone."))){let{error:s}=await o(e);s&&alert("Error deleting user: "+s)}},H=async e=>{if(e.preventDefault(),M(!0),S(""),L(""),!U.email||!U.password){S("Email and password are required"),M(!1);return}if(U.password.length<6){S("Password must be at least 6 characters"),M(!1);return}let{success:s,error:r}=await (0,c.yN)(U.email,U.password,U.displayName,U.role);s?(L("User created successfully!"),C({email:"",password:"",displayName:"",role:"user"}),setTimeout(()=>{w(!1),L("")},2e3)):S(r||"Failed to create user"),M(!1)};return e?y?(0,t.jsx)("div",{className:"p-2 sm:p-3",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"}),(0,t.jsx)("span",{className:"ml-3 text-pink-600",children:"Loading users..."})]})})}):(0,t.jsx)("div",{className:"p-2 sm:p-3",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg sm:text-2xl font-bold text-pink-600 mb-1 sm:mb-2",children:"User Management"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-pink-500",children:"Manage user accounts and permissions"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"bg-pink-500/10 px-3 py-1.5 rounded-lg border border-pink-200/50",children:(0,t.jsxs)("span",{className:"text-xs font-medium text-pink-600",children:[s.length," ",1===s.length?"User":"Users"]})}),(0,t.jsxs)("button",{onClick:()=>w(!0),className:"bg-pink-500/10 hover:bg-pink-500/20 text-pink-600 px-3 py-1.5 rounded-lg text-xs font-medium transition-all border border-pink-200/50 hover:border-pink-300/50 flex items-center space-x-1",children:[(0,t.jsx)(x.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Add User"})]})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(e=>{var s;return(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl border border-pink-200/30 rounded-xl sm:rounded-2xl overflow-hidden shadow-[0_8px_30px_rgb(233,30,99,0.15)] transition-all duration-300 hover:shadow-[0_12px_40px_rgb(233,30,99,0.25)] hover:scale-[1.02] group",children:[(0,t.jsx)("div",{className:"p-3 sm:p-4 border-b border-pink-100/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center ".concat("admin"===e.role?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-blue-400 to-blue-500"),children:"admin"===e.role?(0,t.jsx)(u.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"}):(0,t.jsx)(p.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.displayName||(null==(s=e.email)?void 0:s.split("@")[0])}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email})]})]}),(0,t.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-blue-100 text-blue-700 border border-blue-200"),children:"admin"===e.role?"Admin":"User"})]})}),(0,t.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Created"}),(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:e.createdAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Last Updated"}),(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:e.updatedAt.toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-pink-100/50",children:[(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsx)("button",{onClick:()=>q(e.uid,"admin"===e.role?"user":"admin"),className:"px-2 py-1 rounded-lg text-xs font-medium transition-all ".concat("admin"===e.role?"bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 border border-blue-200/50":"bg-yellow-500/10 hover:bg-yellow-500/20 text-yellow-600 border border-yellow-200/50"),title:"admin"===e.role?"Make User":"Make Admin",children:"admin"===e.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{className:"w-3 h-3 inline mr-1"}),"Make User"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"w-3 h-3 inline mr-1"}),"Make Admin"]})})}),(0,t.jsx)("button",{onClick:()=>P(e.uid,e.email),className:"p-1.5 rounded-lg text-red-600 hover:bg-red-50 transition-all",title:"Delete User",children:(0,t.jsx)(b.A,{className:"w-3 h-3"})})]})]})]},e.uid)})}),0===s.length&&!y&&(0,t.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-pink-200 to-pink-300 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(g.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-pink-600"})}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-pink-700 mb-2",children:"No users found"}),(0,t.jsx)("p",{className:"text-xs text-pink-500 mb-4",children:"Users will appear here once they sign in"})]}),(0,t.jsx)("div",{className:"mt-6 bg-blue-50/50 border border-blue-200/50 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(m.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"User Management"}),(0,t.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed",children:["• ",(0,t.jsx)("strong",{children:"Admins"})," can access all pages including user management",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("strong",{children:"Users"})," can access all pages except user management",(0,t.jsx)("br",{}),"• Role changes take effect immediately"]})]})]})}),k&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-2 sm:p-4 z-50",children:(0,t.jsx)("div",{className:"bg-white/90 backdrop-blur-xl border border-pink-200/30 rounded-xl sm:rounded-2xl shadow-[0_20px_50px_rgb(233,30,99,0.35)] w-full max-w-md max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-pink-700 mb-3 sm:mb-4",children:"Add New User"}),E&&(0,t.jsx)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-600 text-xs",children:E})}),F&&(0,t.jsx)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-green-600 text-xs",children:F})}),(0,t.jsxs)("form",{onSubmit:H,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",value:U.email,onChange:e=>C({...U,email:e.target.value}),className:"w-full px-2 sm:px-3 py-2 border border-pink-200/50 rounded-lg focus:outline-none focus:ring-1 focus:ring-pink-400 focus:border-pink-400 transition-all text-xs",placeholder:"user@example.com",required:!0,disabled:A})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Password *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:_?"text":"password",value:U.password,onChange:e=>C({...U,password:e.target.value}),className:"w-full px-2 sm:px-3 py-2 pr-8 border border-pink-200/50 rounded-lg focus:outline-none focus:ring-1 focus:ring-pink-400 focus:border-pink-400 transition-all text-xs",placeholder:"Minimum 6 characters",required:!0,disabled:A,minLength:6}),(0,t.jsx)("button",{type:"button",onClick:()=>D(!_),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:A,children:_?(0,t.jsx)(j.A,{className:"w-3 h-3"}):(0,t.jsx)(f.A,{className:"w-3 h-3"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Display Name"}),(0,t.jsx)("input",{type:"text",value:U.displayName,onChange:e=>C({...U,displayName:e.target.value}),className:"w-full px-2 sm:px-3 py-2 border border-pink-200/50 rounded-lg focus:outline-none focus:ring-1 focus:ring-pink-400 focus:border-pink-400 transition-all text-xs",placeholder:"Full name (optional)",disabled:A})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Role"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:U.role,onChange:e=>C({...U,role:e.target.value}),className:"w-full px-2 sm:px-3 py-2 border border-pink-200/50 rounded-lg focus:outline-none focus:ring-1 focus:ring-pink-400 focus:border-pink-400 transition-all text-xs appearance-none bg-white cursor-pointer",disabled:A,children:[(0,t.jsx)("option",{value:"user",children:"User"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,t.jsx)("svg",{className:"w-3 h-3 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-2 sm:pt-3 border-t border-pink-100",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{C({email:"",password:"",displayName:"",role:"user"}),S(""),L(""),D(!1),w(!1)},disabled:A,className:"px-2 sm:px-3 py-1.5 text-pink-600 bg-pink-50/60 rounded-lg text-xs font-medium hover:bg-pink-100/60 transition-all disabled:opacity-50",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:A,className:"px-2 sm:px-3 py-1.5 bg-pink-500/10 hover:bg-pink-500/20 text-pink-600 rounded-lg text-xs font-medium border border-pink-200/50 hover:border-pink-300/50 transition-all disabled:opacity-50 flex items-center space-x-1",children:[A&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-pink-600"}),(0,t.jsx)(v.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:A?"Creating...":"Create User"})]})]})]})]})})})]})}):(0,t.jsx)("div",{className:"p-2 sm:p-3",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(m.A,{className:"w-8 h-8 text-red-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})})})}}},e=>{e.O(0,[135,210,748,227,441,964,358],()=>e(e.s=5660)),_N_E=e.O()}]);